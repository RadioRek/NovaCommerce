{% extends "base.html" %}
{% load static %}


{% block head %}
<title>Perfil</title>
<link rel="stylesheet" href="{% static 'css/perfil.css' %}">
{% endblock head %}

{% block body %}

<div class="row m-0 p-2 p-sm-4 justify-content-center">

    <div class="col-12">
        <h1 class="head1 text-center">Mi Perfil</h1>
    </div>

    <div class="container col-12 col-sm-4 d-flex m-0 flex-column mb-sm-0 mb-2">

        <div class="card h-100 text-center p-2 p-sm-4 d-flex flex-column justify-content-between">

            <div class="contInfoPersonal w-90 d-flex flex-column mx-auto">
                <h4 class="head4">Información Personal</h4>
                <h4 class="head4">{{ user.username }}</h4>


                <div class="d-flex justify-content-between">
                    <p class="parrafoPequeño"><strong>Nombre:</strong></p>
                    <p class="parrafoPequeño">{{ user.nombre|default:"No especificado" }}</p>
                </div>

                <div class="d-flex justify-content-between">
                    <p class="parrafoPequeño"><strong>Apellido:</strong></p>
                    <p class="parrafoPequeño">{{ user.apellido|default:"No especificado" }}</p>
                </div>

                <div class="d-flex justify-content-between">
                    <p class="parrafoPequeño"><strong>Email:</strong></p>
                    <p class="parrafoPequeño">{{ user.email }}</p>
                </div>

                <div class="d-flex justify-content-between">
                    <p class="parrafoPequeño"><strong>Direccion:</strong></p>
                    <p class="parrafoPequeño">{{ user.direccion|default:"No especificado" }}</p>
                </div>

                <div class="d-flex justify-content-between">
                    <p class="parrafoPequeño"><strong>Telefono:</strong></p>
                    <p class="parrafoPequeño">{{ user.telefono|default:"No especificado" }}</p>
                </div>

            </div>


            <div class="contHistVentas w-90 d-flex flex-column mx-auto scrollbarStyling gap-2">
                <h4 class="head4">Historial de Compras</h4>

                {% for venta in ventas %}

                    <div class="card cartaVenta m-0 p-0">
                        <div class="card-body p-2">
                            <h5 class="head5 p-0 m-0">Compra {{ venta.id }}</h5>
                            <p class="parrafoPequeño p-0 m-0"><strong>Total:</strong> ${{ venta.totalVenta }}</p>
                            <a href="{% url 'confirmacionOrden' venta.id %}" class="textoMinimo">Ver detalles</a>
                        </div>

                    </div>
                {% endfor %}

            </div>

        </div>
    </div>


    <div class="container col-12 col-sm-8 d-flex m-0 flex-column">

        <div class="card p-2 p-sm-4">

            <div class="card-body text-center p-0">
                <h4 class="head4">Editar Perfil</h4>
                <input type="hidden" id="usuarioId" value="{{ user.id }}" />
                <form id="formPerfil">
                    {% csrf_token %}

                    <div class="mb-3">
                        <label for="usernameInput" class="form-label textoMinimo">Username</label>
                        <input type="text" class="form-control mb-2 estiloInput parrafoPequeño" id="usernameInput"
                            name="username" placeholder="username de usuario" value="{{ user.username }}" required />
                    </div>

                    <div class="mb-3">
                        <label for="nombreInput" class="form-label textoMinimo">Nombre</label>
                        <input type="text" class="form-control mb-2 estiloInput parrafoPequeño" id="nombreInput"
                            name="nombre" placeholder="....." value="{{ user.nombre }}" required />
                    </div>

                    <div class="mb-3">
                        <label for="ApellidoInput" class="form-label textoMinimo">Apellido</label>
                        <input type="text" class="form-control mb-2 estiloInput parrafoPequeño" id="ApellidoInput"
                            name="apellido" placeholder="....." value="{{ user.apellido }}" required />
                    </div>

                    <div class="mb-3">
                        <label for="DireccionInput" class="form-label textoMinimo">Direccion</label>
                        <input type="text" class="form-control mb-2 estiloInput parrafoPequeño" id="DireccionInput"
                            name="direccion" placeholder="Calle Falsa 123" value="{{ user.direccion }}" required />
                    </div>

                    <div class="mb-3">
                        <label for="TelefonoInput" class="form-label textoMinimo">Telefono</label>
                        <input type="number" class="form-control mb-2 estiloInput parrafoPequeño" id="TelefonoInput"
                            name="telefono" placeholder="953846738" value="{{ user.telefono|default:'' }}" required />
                    </div>

                    <div class="mb-3">
                        <label for="EmailInput" class="form-label textoMinimo">Email</label>
                        <input type="email" class="form-control mb-2 estiloInput parrafoPequeño" id="EmailInput"
                            name="email" placeholder="Tu@email.example" value="{{ user.email }}" required />
                    </div>

                    <div class="mb-3">
                        <label for="passwordInput" class="form-label textoMinimo">Nueva contraseña</label>
                        <input type="password" class="form-control mb-2 estiloInput parrafoPequeño"
                            id="passwordInput" />
                    </div>

                    <div class="mb-3">
                        <label for="passwordConfInput" class="form-label textoMinimo">Confirmar nueva contraseña</label>
                        <input type="password" class="form-control mb-2 estiloInput parrafoPequeño"
                            id="passwordConfInput" />
                    </div>

                    <button type="submit" class="botonGenerico">Guardar cambios</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'js/perfil.js' %}"></script>
{% endblock body %}